<nav class="collapse navbar-expandable-top hidden-md-up" id="navbar-mobile" aria-expanded="false" style="height: 0px;"
     data-ng-controller="NavigationController as vm">
  <div class="container-fluid bg-inverse pt-1 pb-1">
    <a class="nav-link" data-ui-sref="networhk.contribution-add({domain: vm.stateParams.domain})"
       data-ng-show="vm.onState('networhk')"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons">add_circle</i>
      <span>Contribution</span>
    </a>
    <a class="nav-link" data-ui-sref="networhk.contributions-my({domain: vm.stateParams.domain})"
       data-ui-sref-opts="{reload: true}"
       data-ng-show="vm.onState('networhk')"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons">thumbs_up_down</i>
      <span>Health</span>
    </a>
    <a class="nav-link" data-ui-sref="networhk.contributions-open({domain: vm.stateParams.domain})"
       data-ng-show="vm.onState('networhk')"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons">panorama_fish_eye</i>
      <span>Marketplace</span>
    </a>
    <a class="nav-link" data-ui-sref="networhk.contributions-done({domain: vm.stateParams.domain})"
       data-ng-show="vm.onState('networhk')"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons">check</i>
      <span>Done contributions</span>
    </a>
    <a class="nav-link" data-ui-sref="networhk.customers({domain: vm.stateParams.domain})"
       data-ng-show="vm.onState('networhk') && networhk.features.contribution2"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons">favorite</i>
      <span>Customers</span>
    </a>
    <!-- staRHs begin -->
    <hr data-ng-show="vm.onState('networhk') && networhk.features.staRHs">
    <p class="nav-section" data-ng-show="vm.onState('networhk') && networhk.features.staRHs">
      <i class="material-icons">star</i>
      <span>staRHs</span>
    </p>
    <a class="nav-link" data-ui-sref="networhk.starhs-received({domain: vm.stateParams.domain})"
       data-ng-show="vm.onState('networhk') && networhk.features.staRHs"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons">inbox</i>
      <span>Received staRHs</span>
    </a>
    <a class="nav-link" data-ui-sref="networhk.starhs-shared({domain: vm.stateParams.domain})"
       data-ng-show="vm.onState('networhk') && networhk.features.staRHs"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons">send</i>
      <span>Shared staRHs</span>
    </a>
    <hr data-ng-show="vm.onState('networhk') && networhk.features.staRHs">
    <!-- staRHs end -->
    <a class="nav-link" data-ui-sref="dashboard" data-ng-show="vm.authenticated"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons">dashboard</i>
      <span>Dashboard</span>
    </a>
    <!-- Admin menu -->
    <hr data-ng-show="vm.authenticated && vm.me.superUser">
    <p class="nav-section" data-ng-show="vm.authenticated && vm.me.superUser">
      <i class="material-icons">security</i>
      <span>Administration</span>
    </p>
    <a class="nav-link" data-ui-sref="admin.users" data-ng-show="vm.authenticated && vm.me.superUser" data-toggle="collapse" data-target="#navbar-mobile" aria-expanded="true">
      <i class="material-icons">people</i>
      <span>Users</span>
    </a>
    <a class="nav-link" data-ui-sref="admin.networhks" data-ng-show="vm.authenticated && vm.me.superUser" data-toggle="collapse" data-target="#navbar-mobile" aria-expanded="true">
      <i class="material-icons">apps</i>
      <span>NetwoRHks</span>
    </a>
    <!-- User menu -->
    <hr data-ng-show="vm.authenticated">
    <p class="nav-section" data-ng-show="vm.authenticated">
      <i class="material-icons" data-ng-if="!vm.me.avatar">account_circle</i>
      <img data-ng-src="%%vm.me.avatar%%" data-ng-if="vm.me.avatar" class="avatar">
      <span>%%vm.me.firstname%%</span>
    </p>
    <a class="nav-link" data-ui-sref="account.profile" data-ng-show="vm.authenticated"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons">face</i>
      <span>Change profile</span>
    </a>
    <a class="nav-link" data-ui-sref="account.avatar" data-ng-show="vm.authenticated"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons">photo</i>
      <span>Change avatar</span>
    </a>
    <hr data-ng-show="vm.authenticated">
    <a class="nav-link" data-ng-click="vm.refreshToken()" data-ng-show="vm.authenticated"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons" data-ng-show="(vm.tokenLifetime)>0">schedule</i>
      <i class="material-icons" data-ng-show="(vm.tokenLifetime)<=0">warning</i>
      <span>Auto-logout in: %%vm.tokenLifetimeHuman%%. Click here to prolong.</span>
    </a>
    <a class="nav-link" data-ui-sref="logout" data-ng-show="vm.authenticated"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons">power_settings_new</i>
      <span>Logout</span>
    </a>
    <a class="nav-link" href="https://netwoRHk.net/" aria-expanded="true" target="_blank">
      <i class="material-icons">help</i>
      <span>About netwoRHk</span>
    </a>
    <a class="nav-link" data-ui-sref="register" data-ng-hide="vm.authenticated"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons">person_add</i>
      <span>Register</span>
    </a>
    <a class="nav-link" data-ui-sref="login" data-ng-hide="vm.authenticated"
       data-toggle="collapse"
       data-target="#navbar-mobile"
       aria-expanded="true">
      <i class="material-icons">person</i>
      <span>Login</span>
    </a>
  </div>
</nav>
<nav class="navbar navbar-static-top ng-cloak" data-ng-controller="NavigationController as vm">
  <span class="navbar-brand" data-ng-show="!vm.onState('networhk')">
    <img src="img/logo-white.svg" alt="<%= data.name %>">
  </span>
  <a class="navbar-brand" data-ng-show="vm.onState('networhk')"
     data-ui-sref="networhk({domain: vm.stateParams.domain})">
    <img src="img/logo-white.svg" alt="<%= data.name %>" data-ng-hide="logo">
    <img data-ng-src="%%logo.url%%" alt="%%logo.label%%" data-ng-show="logo">
  </a>
  <ul class="nav navbar-nav hidden-sm-down">
    <li class="nav-item" data-ng-show="vm.authenticated && vm.onState('networhk')"
        data-ng-class="{active: vm.onState('networhk.contribution-add')}">
      <a class="nav-link" data-ui-sref="networhk.contribution-add({domain: vm.stateParams.domain})"
         title="Contribution">
        <i class="material-icons">add_circle</i>
        <span class="hidden-lg-down">Contribute</span>
      </a>
    </li>
    <li class="nav-item" data-ng-show="vm.authenticated && vm.onState('networhk')"
        data-ng-class="{active: vm.onState('networhk.contributions-my')}">
      <a class="nav-link" data-ui-sref="networhk.contributions-my({domain: vm.stateParams.domain})"
         title="Health">
        <i class="material-icons">thumbs_up_down</i>
        <span class="hidden-md-down">Health</span>
      </a>
    </li>
    <li class="nav-item" data-ng-show="vm.authenticated && vm.onState('networhk')"
        data-ng-class="{active: vm.onState('networhk.contributions-open')}">
      <a class="nav-link" data-ui-sref="networhk.contributions-open({domain: vm.stateParams.domain})"
         title="Marketplace">
        <i class="material-icons">panorama_fish_eye</i>
        <span class="hidden-md-down">Marketplace</span>
      </a>
    </li>
    <li class="nav-item" data-ng-show="vm.authenticated && vm.onState('networhk')"
        data-ng-class="{active: vm.onState('networhk.contributions-done')}">
      <a class="nav-link" data-ui-sref="networhk.contributions-done({domain: vm.stateParams.domain})"
         title="Done contributions">
        <i class="material-icons">check</i>
        <span class="hidden-md-down">Done</span> <span class="hidden-xl-down">contributions</span>
      </a>
    </li>
    <li class="nav-item" data-ng-show="vm.authenticated && vm.onState('networhk') && networhk.features.contribution2"
        data-ng-class="{active: vm.onState('networhk.customers')}">
      <a class="nav-link" data-ui-sref="networhk.customers({domain: vm.stateParams.domain})"
         title="Customers">
        <i class="material-icons">favorite</i>
        <span class="hidden-md-down">Customers</span>
      </a>
    </li>
    <li class="nav-item btn-group" data-ng-show="vm.authenticated && vm.onState('networhk') && networhk.features.staRHs" data-ng-class="{active: vm.onState('networhk.starhs-received')}">
      <a class="nav-link dropdown-toggle" data-toggle="dropdown" id="staRHsMenu" aria-haspopup="true"
         aria-expanded="false" title="staRHs">
        <i class="material-icons">star</i>
        <span class="hidden-md-down">staRHs</span>
      </a>
      <div class="dropdown-menu dropdown-menu-right" aria-labelledby="staRHsMenu">
        <a class="dropdown-item" data-ui-sref="networhk.starhs-received({domain: vm.stateParams.domain})" data-ng-class="{active: vm.onState('networhk.starhs-received')}">
          <i class="material-icons">inbox</i>
          <span>Received</span>
        </a>
        <a class="dropdown-item" data-ui-sref="networhk.starhs-shared({domain: vm.stateParams.domain})" data-ng-class="{active: vm.onState('networhk.starhs-shared')}">
          <i class="material-icons">send</i>
          <span>Shared</span>
        </a>
      </div>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="https://netwoRHk.net/" target="_blank">
        <i class="material-icons">help</i>
        <span data-ng-hide="vm.onState('networhk')">About netwoRHk</span>
      </a>
    </li>
    <li class="nav-item" data-ng-show="vm.authenticated" data-ng-class="{active: vm.onState('dashboard')}">
      <a class="nav-link" data-ui-sref="dashboard" title="Dashboard">
        <i class="material-icons">dashboard</i>
        <span data-ng-hide="vm.onState('networhk')">
          Dashboard
        </span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link"
         data-ng-show="vm.onState('networhk')"
         title="Add to Slack"
         href="https://slack.com/oauth/authorize?scope=bot&amp;client_id=16364690114.98910571792&amp;redirect_uri=<%= data['webHost'] %>/%23!/slack" target="_blank">
        <i class="material-icons">device_hub</i>
      </a>
    </li>
  </ul>
  <ul class="nav navbar-nav hidden-sm-down" id="metanav">
    <li class="nav-item">
      <abbr class="nav-static-item connection-error" data-ng-class="{ok: !vm.connectionError, error: vm.connectionError}">
        <i class="material-icons spin" data-ng-if="!vm.connectionError" title="Connection ok">sync</i>
        <i class="material-icons danger" data-ng-if="vm.connectionError" title="Connection failed …">sync_problem</i>
      </abbr>
    </li>
    <li class="nav-item btn-group" data-ng-show="vm.authenticated && vm.me.superUser" data-ng-class="{active: vm.onState('admin')}">
      <a class="nav-link dropdown-toggle" data-toggle="dropdown" id="adminMenu" aria-haspopup="true" aria-expanded="false" title="Administration">
        <i class="material-icons">security</i>
      </a>
      <div class="dropdown-menu dropdown-menu-right" aria-labelledby="adminMenu">
        <a class="dropdown-item" data-ui-sref="admin.users" data-ng-class="{active: vm.onState('admin.users')}">
          <i class="material-icons">people</i>
          <span>Users</span>
        </a>
        <a class="dropdown-item" data-ui-sref="admin.networhks" data-ng-class="{active: vm.onState('admin.networhks')}">
          <i class="material-icons">apps</i>
          <span>NetwoRHks</span>
        </a>
      </div>
    </li>
    <li class="nav-item" data-ng-show="vm.authenticated">
      <a class="nav-link" data-ng-click="vm.refreshToken()"
         title="Remaining time until auto-logout. Click to prolong.">
        <i class="material-icons" data-ng-show="(vm.tokenLifetime)>0">schedule</i>
        <i class="material-icons" data-ng-show="(vm.tokenLifetime)<=0">warning</i>
        <span>%%vm.tokenLifetimeHuman%%</span>
      </a>
    </li>
    <li class="nav-item btn-group" data-ng-show="vm.authenticated" data-ng-class="{active: vm.onState('me')}">
      <a class="nav-link dropdown-toggle" data-toggle="dropdown" id="accountMenu" aria-haspopup="true"
         aria-expanded="false" title="%%vm.me.firstname || 'Anonymous'%%">
        <i class="material-icons" data-ng-if="!vm.me.avatar">account_circle</i>
        <img data-ng-src="%%vm.me.avatar%%" data-ng-if="vm.me.avatar" class="avatar">
        <span class="hidden-lg-down">%%vm.me.firstname%%</span>
      </a>
      <div class="dropdown-menu dropdown-menu-right" aria-labelledby="accountMenu">
        <a class="dropdown-item" data-ui-sref="account.profile" data-ng-class="{active: vm.onState('account.profile')}">
          <i class="material-icons">face</i>
          <span>Change profile</span>
        </a>
        <a class="dropdown-item" data-ui-sref="account.avatar" data-ng-class="{active: vm.onState('account.avatar')}">
          <i class="material-icons">photo</i>
          <span>Change avatar</span>
        </a>
      </div>
    </li>
    <li class="nav-item" data-ng-show="vm.authenticated" title="Logout">
      <a class="nav-link" data-ui-sref="logout">
        <i class="material-icons">power_settings_new</i>
        <span class="hidden-lg-down">Logout</span>
      </a>
    </li>
    <li class="nav-item" data-ng-hide="vm.authenticated" title="Register">
      <a class="nav-link" data-ui-sref="register">
        <i class="material-icons">person_add</i>
        <span>Register</span>
      </a>
    </li>
    <li class="nav-item" data-ng-hide="vm.authenticated" title="Login">
      <a class="nav-link" data-ui-sref="login">
        <i class="material-icons">person</i>
        <span>Login</span>
      </a>
    </li>
  </ul>
  <button class="navbar-toggler collapsed hidden-md-up" type="button" data-toggle="collapse"
          data-target="#navbar-mobile" aria-expanded="false">
    ☰
  </button>
</nav>
